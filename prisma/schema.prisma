generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "windows"]
  engineType    = "binary"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model client {
  id                                   Int               @id @default(autoincrement())
  name                                 String            @db.VarChar(100)
  nick                                 String?           @db.VarChar(100)
  phone                                String?           @db.VarChar(100)
  photo                                String?           @db.VarChar(255)
  backgroundImage                      String?           @db.VarChar(255)
  description                          String?           @db.VarChar(255)
  instagram                            String?           @db.VarChar(255)
  createdAt                            DateTime          @default(now()) @db.Timestamp(0)
  updatedAt                            DateTime?         @db.Timestamp(0)
  deletedAt                            DateTime?         @db.Timestamp(0)
  document                             String?           @db.VarChar(100)
  cref                                 String?           @db.VarChar(100)
  situation                            Int               @default(1) @db.TinyInt
  gender                               Int?              @db.TinyInt
  birthDate                            DateTime?         @db.Timestamp(0)
  userType                             Int               @default(2)
  bannedUntil                          DateTime?         @db.DateTime(0)
  type                                 type              @relation(fields: [userType], references: [id], onUpdate: Restrict, map: "client_type_FK")
  comments                             comments[]
  eventCapacity                        eventCapacity[]
  forbiddenAlerts                      forbiddenAlerts[]
  friendship_friendship_senderToclient friendship[]      @relation("friendship_senderToclient")
  friendship_friendship_friendToclient friendship[]      @relation("friendship_friendToclient")
  images                               images[]
  posts                                posts[]
  user                                 user[]

  @@index([userType], map: "client_type_FK")
}

model type {
  id          Int      @id @default(autoincrement())
  name        String   @db.VarChar(100)
  description String?  @db.VarChar(255)
  situation   Int      @default(1) @db.TinyInt
  client      client[]
  user        user[]
}

model user {
  id                   Int             @id @default(autoincrement())
  email                String          @db.VarChar(100)
  password             String          @db.VarChar(255)
  tip                  String?         @db.VarChar(255)
  reply                String?         @db.VarChar(255)
  questionId           Int?
  clientId             Int
  typeId               Int?            @default(1)
  lastPaymentId        Int?
  createdAt            DateTime        @default(now()) @db.Timestamp(0)
  updatedAt            DateTime?       @db.Timestamp(0)
  deletedAt            DateTime?       @db.Timestamp(0)
  situation            Int             @default(1) @db.TinyInt
  socialCode           String?         @db.VarChar(50)
  inputCode            String?         @db.Char(10)
  resetPasswordExpires DateTime?       @db.DateTime(0)
  blocks               blocks[]
  companies            companies[]
  eventCapacity        eventCapacity[]
  participation        participation[]
  client               client          @relation(fields: [clientId], references: [id], onUpdate: Restrict, map: "user_client_FK")
  questions            question?       @relation(fields: [questionId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "user_questions_FK")
  type                 type?           @relation(fields: [typeId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "user_type_FK")

  @@index([questionId], map: "user_questions_FK")
  @@index([typeId], map: "user_type_FK")
  @@index([clientId], map: "user_client_FK")
}

model question {
  id        Int    @id @default(autoincrement())
  question  String @db.VarChar(255)
  situation Int    @default(1) @db.TinyInt
  user      user[]
}

model posts {
  id              Int               @id @default(autoincrement())
  title           String?           @db.VarChar(100)
  description     String?           @db.VarChar(255)
  image           String?           @db.VarChar(100)
  video           String?           @db.VarChar(100)
  authorId        Int?
  createdAt       DateTime?         @default(now()) @db.DateTime(0)
  updatedAt       DateTime?         @db.DateTime(0)
  situation       Int?              @default(1) @db.TinyInt
  type            Int?              @default(1) @db.TinyInt
  companyId       Int?
  comments        comments[]
  forbiddenAlerts forbiddenAlerts[]
  client          client?           @relation(fields: [authorId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "posts_client_FK")
  company         companies?        @relation(fields: [companyId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "posts_company_FK")

  @@index([authorId], map: "posts_client_FK")
  @@index([companyId], map: "posts_company_FK")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model forbiddenAlerts {
  id            Int       @id @default(autoincrement())
  clientId      Int?
  text          String?   @db.VarChar(255)
  createdAt     DateTime  @default(now()) @db.DateTime(0)
  status        String    @default("1") @db.VarChar(100)
  postId        Int?
  postCommentId Int?
  updatedText   String?   @db.VarChar(255)
  updatedAt     DateTime? @db.DateTime(0)
  blocks        blocks[]
  client        client?   @relation(fields: [clientId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "forbiddenAlerts_client_FK")
  comments      comments? @relation(fields: [postCommentId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "forbiddenAlerts_comments_FK")
  posts         posts?    @relation(fields: [postId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "forbiddenAlerts_posts_FK")

  @@index([clientId], map: "forbiddenAlerts_client_FK")
  @@index([postId], map: "forbiddenAlerts_posts_FK")
  @@index([postCommentId], map: "forbiddenAlerts_comments_FK")
}

model faq {
  id        Int    @id @default(autoincrement())
  question  String @db.VarChar(100)
  answer    String @db.Text
  situation Int    @default(1) @db.TinyInt
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model friendship {
  id                               Int       @id @default(autoincrement())
  sender                           Int
  friend                           Int
  accept                           Int       @default(0) @db.TinyInt
  createdAt                        DateTime  @default(now()) @db.DateTime(0)
  updatedAt                        DateTime? @db.DateTime(0)
  client_friendship_senderToclient client    @relation("friendship_senderToclient", fields: [sender], references: [id], onUpdate: Restrict, map: "friendship_client_FK")
  client_friendship_friendToclient client    @relation("friendship_friendToclient", fields: [friend], references: [id], onUpdate: Restrict, map: "friendship_client_FK_1")

  @@index([sender], map: "friendship_client_FK")
  @@index([friend], map: "friendship_client_FK_1")
}

model comments {
  id              Int               @id @default(autoincrement())
  content         String            @db.VarChar(500)
  postId          Int
  authorId        Int
  parentCommentId Int?
  type            Int               @default(1) @db.TinyInt
  situation       Int               @default(1) @db.TinyInt
  createdAt       DateTime          @default(now()) @db.DateTime(0)
  updatedAt       DateTime?         @db.DateTime(0)
  deletedAt       DateTime?         @db.DateTime(0)
  author          client            @relation(fields: [authorId], references: [id], onUpdate: Restrict, map: "comments_client_FK")
  parentComment   comments?         @relation("CommentReplies", fields: [parentCommentId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "comments_parent_FK")
  replies         comments[]        @relation("CommentReplies")
  post            posts             @relation(fields: [postId], references: [id], onUpdate: Restrict, map: "comments_posts_FK")
  forbiddenAlerts forbiddenAlerts[]

  @@index([postId], map: "comments_posts_FK")
  @@index([authorId], map: "comments_client_FK")
  @@index([parentCommentId], map: "comments_parent_FK")
}

model images {
  id        Int       @id @default(autoincrement())
  clientId  Int
  url       String    @db.VarChar(255)
  order     Int       @default(0)
  situation Int       @default(1) @db.TinyInt
  createdAt DateTime  @default(now()) @db.DateTime(0)
  updatedAt DateTime? @db.DateTime(0)
  deletedAt DateTime? @db.DateTime(0)
  client    client    @relation(fields: [clientId], references: [id], onUpdate: Restrict, map: "images_client_FK")

  @@index([clientId], map: "images_client_FK")
}

model blocks {
  id               Int             @id @default(autoincrement())
  userId           Int
  forbiddenAlertId Int
  period           Int
  situation        Int             @default(1) @db.TinyInt
  createdAt        DateTime        @default(now()) @db.DateTime(0)
  updatedAt        DateTime?       @db.DateTime(0)
  deletedAt        DateTime?       @db.DateTime(0)
  forbiddenAlert   forbiddenAlerts @relation(fields: [forbiddenAlertId], references: [id], onUpdate: Restrict, map: "blocks_forbiddenAlerts_FK")
  user             user            @relation(fields: [userId], references: [id], onUpdate: Restrict, map: "blocks_user_FK")

  @@index([userId], map: "blocks_user_FK")
  @@index([forbiddenAlertId], map: "blocks_forbiddenAlerts_FK")
}

model allGenders {
  id        Int       @id @default(autoincrement())
  name      String    @db.VarChar(100)
  situation Int       @default(1) @db.TinyInt
  createdAt DateTime  @default(now()) @db.DateTime(0)
  updatedAt DateTime? @db.DateTime(0)
  deletedAt DateTime? @db.DateTime(0)
}

model companies {
  id              Int       @id @default(autoincrement())
  name            String    @db.VarChar(100)
  description     String?   @db.VarChar(255)
  photo           String?   @db.VarChar(255)
  backgroundImage String?   @db.VarChar(255)
  phone           String?   @db.VarChar(100)
  email           String?   @db.VarChar(100)
  responsibleId   Int
  situation       Int       @default(1) @db.TinyInt
  createdAt       DateTime  @default(now()) @db.DateTime(0)
  updatedAt       DateTime? @db.DateTime(0)
  deletedAt       DateTime? @db.DateTime(0)
  cnpj            String    @db.VarChar(18)
  responsible     user      @relation(fields: [responsibleId], references: [id], onUpdate: Restrict, map: "companies_user_FK")
  events          events[]
  posts           posts[]

  @@index([responsibleId], map: "companies_user_FK")
}

model eventType {
  id          Int       @id @default(autoincrement())
  name        String    @db.VarChar(100)
  description String?   @db.VarChar(255)
  situation   Int       @default(1) @db.TinyInt
  createdAt   DateTime  @default(now()) @db.DateTime(0)
  updatedAt   DateTime? @db.DateTime(0)
  deletedAt   DateTime? @db.DateTime(0)
  events      events[]
}

model events {
  id               Int             @id @default(autoincrement())
  name             String          @db.VarChar(200)
  description      String          @db.Text
  photo            String?         @db.VarChar(255)
  backgroundImage  String?         @db.VarChar(255)
  isPublic         Boolean         @default(false)
  isPublicMetrics  Boolean         @default(true)
  situation        Int             @default(1) @db.TinyInt
  promotionalText  String?         @db.Text
  promotionalVideo String?         @db.VarChar(255)
  promotionalImage String?         @db.VarChar(255)
  promotionalUrl   String?         @db.VarChar(500)
  companyId        Int
  eventTypeId      Int             @default(1)
  createdAt        DateTime        @default(now()) @db.DateTime(0)
  updatedAt        DateTime?       @db.DateTime(0)
  deletedAt        DateTime?       @db.DateTime(0)
  startAt          DateTime        @db.DateTime(0)
  endAt            DateTime        @db.DateTime(0)
  eventCapacity    eventCapacity[]
  participation    participation[]
  company          companies       @relation(fields: [companyId], references: [id], onUpdate: Restrict, map: "events_company_FK")
  eventType        eventType       @relation(fields: [eventTypeId], references: [id], onUpdate: Restrict, map: "events_eventType_FK")

  @@index([companyId], map: "events_company_FK")
  @@index([eventTypeId], map: "events_eventType_FK")
}

model participation {
  id        Int       @id @default(autoincrement())
  userId    Int
  eventId   Int
  status    Int       @default(0) @db.TinyInt
  createdAt DateTime  @default(now()) @db.DateTime(0)
  updatedAt DateTime? @db.DateTime(0)
  user      user      @relation(fields: [userId], references: [id], onUpdate: Restrict, map: "participation_user_FK")
  event     events    @relation(fields: [eventId], references: [id], onUpdate: Restrict, map: "participation_event_FK")

  @@unique([userId, eventId], map: "participation_unique")
  @@index([userId], map: "participation_user_FK")
  @@index([eventId], map: "participation_event_FK")
}

model eventCapacity {
  id          Int       @id @default(autoincrement())
  eventId     Int
  type        String    @db.VarChar(20)
  quantity    Int
  description String?   @db.VarChar(500)
  userId      Int?
  clientId    Int?
  createdAt   DateTime  @default(now()) @db.DateTime(0)
  updatedAt   DateTime? @db.DateTime(0)
  client      client?   @relation(fields: [clientId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "eventCapacity_client_FK")
  event       events    @relation(fields: [eventId], references: [id], onUpdate: Restrict, map: "eventCapacity_event_FK")
  user        user?     @relation(fields: [userId], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "eventCapacity_user_FK")

  @@index([eventId], map: "eventCapacity_event_FK")
  @@index([userId], map: "eventCapacity_user_FK")
  @@index([clientId], map: "eventCapacity_client_FK")
}
